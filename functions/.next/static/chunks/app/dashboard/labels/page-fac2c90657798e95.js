(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7273],{16976:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(95155);function r(e){let{title:t,description:a,actions:r}=e;return(0,s.jsxs)("div",{className:"mb-6 md:flex md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold leading-7 text-foreground sm:truncate sm:text-3xl sm:tracking-tight",children:t}),a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:a})]}),r&&(0,s.jsx)("div",{className:"mt-4 flex md:ml-4 md:mt-0",children:r})]})}},28044:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]])},45216:(e,t,a)=>{Promise.resolve().then(a.bind(a,89890))},47262:(e,t,a)=>{"use strict";a.d(t,{S:()=>l});var s=a(95155),r=a(12115),i=a(76981),d=a(10518),o=a(59434);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.bL,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(i.C1,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})})});l.displayName=i.bL.displayName},53054:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},59409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>p,eb:()=>f,gC:()=>h,l6:()=>c,yv:()=>u});var s=a(95155),r=a(12115),i=a(14582),d=a(79556),o=a(77381),l=a(10518),n=a(59434);let c=i.bL;i.YJ;let u=i.WT,p=r.forwardRef((e,t)=>{let{className:a,children:r,...o}=e;return(0,s.jsxs)(i.l9,{ref:t,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...o,children:[r,(0,s.jsx)(i.In,{asChild:!0,children:(0,s.jsx)(d.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=i.l9.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.PP,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(o.A,{className:"h-4 w-4"})})});m.displayName=i.PP.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.wn,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});x.displayName=i.wn.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,position:d="popper",...o}=e;return(0,s.jsx)(i.ZL,{children:(0,s.jsxs)(i.UC,{ref:t,className:(0,n.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===d&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:d,...o,children:[(0,s.jsx)(m,{}),(0,s.jsx)(i.LM,{className:(0,n.cn)("p-1","popper"===d&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(x,{})]})})});h.displayName=i.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.JU,{ref:t,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=i.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(i.q7,{ref:t,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...d,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.VF,{children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})}),(0,s.jsx)(i.p4,{children:r})]})});f.displayName=i.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.wv,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=i.wv.displayName},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>n,Wu:()=>c,ZB:()=>l,Zp:()=>d,aR:()=>o,wL:()=>u});var s=a(95155),r=a(12115),i=a(59434);let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});d.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});n.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},76570:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},76981:(e,t,a)=>{"use strict";a.d(t,{C1:()=>k,bL:()=>v});var s=a(12115),r=a(6101),i=a(46081),d=a(85185),o=a(5845),l=a(45503),n=a(11275),c=a(28905),u=a(63655),p=a(95155),m="Checkbox",[x,h]=(0,i.A)(m),[f,j]=x(m);function b(e){let{__scopeCheckbox:t,checked:a,children:r,defaultChecked:i,disabled:d,form:l,name:n,onCheckedChange:c,required:u,value:x="on",internal_do_not_use_render:h}=e,[j,b]=(0,o.i)({prop:a,defaultProp:null!=i&&i,onChange:c,caller:m}),[y,N]=s.useState(null),[v,g]=s.useState(null),k=s.useRef(!1),w=!y||!!l||!!y.closest("form"),C={checked:j,disabled:d,setChecked:b,control:y,setControl:N,name:n,form:l,value:x,hasConsumerStoppedPropagationRef:k,required:u,defaultChecked:!I(i)&&i,isFormControl:w,bubbleInput:v,setBubbleInput:g};return(0,p.jsx)(f,{scope:t,...C,children:"function"==typeof h?h(C):r})}var y="CheckboxTrigger",N=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,onKeyDown:i,onClick:o,...l}=e,{control:n,value:c,disabled:m,checked:x,required:h,setControl:f,setChecked:b,hasConsumerStoppedPropagationRef:N,isFormControl:v,bubbleInput:g}=j(y,a),k=(0,r.s)(t,f),w=s.useRef(x);return s.useEffect(()=>{let e=null==n?void 0:n.form;if(e){let t=()=>b(w.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[n,b]),(0,p.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":I(x)?"mixed":x,"aria-required":h,"data-state":S(x),"data-disabled":m?"":void 0,disabled:m,value:c,...l,ref:k,onKeyDown:(0,d.m)(i,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,d.m)(o,e=>{b(e=>!!I(e)||!e),g&&v&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})})});N.displayName=y;var v=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,name:s,checked:r,defaultChecked:i,required:d,disabled:o,value:l,onCheckedChange:n,form:c,...u}=e;return(0,p.jsx)(b,{__scopeCheckbox:a,checked:r,defaultChecked:i,disabled:o,required:d,onCheckedChange:n,name:s,form:c,value:l,internal_do_not_use_render:e=>{let{isFormControl:s}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(N,{...u,ref:t,__scopeCheckbox:a}),s&&(0,p.jsx)(C,{__scopeCheckbox:a})]})}})});v.displayName=m;var g="CheckboxIndicator",k=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,forceMount:s,...r}=e,i=j(g,a);return(0,p.jsx)(c.C,{present:s||I(i.checked)||!0===i.checked,children:(0,p.jsx)(u.sG.span,{"data-state":S(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t,style:{pointerEvents:"none",...e.style}})})});k.displayName=g;var w="CheckboxBubbleInput",C=s.forwardRef((e,t)=>{let{__scopeCheckbox:a,...i}=e,{control:d,hasConsumerStoppedPropagationRef:o,checked:c,defaultChecked:m,required:x,disabled:h,name:f,value:b,form:y,bubbleInput:N,setBubbleInput:v}=j(w,a),g=(0,r.s)(t,v),k=(0,l.Z)(c),C=(0,n.X)(d);s.useEffect(()=>{if(!N)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,t=!o.current;if(k!==c&&e){let a=new Event("click",{bubbles:t});N.indeterminate=I(c),e.call(N,!I(c)&&c),N.dispatchEvent(a)}},[N,k,c,o]);let S=s.useRef(!I(c)&&c);return(0,p.jsx)(u.sG.input,{type:"checkbox","aria-hidden":!0,defaultChecked:null!=m?m:S.current,required:x,disabled:h,name:f,value:b,form:y,...i,tabIndex:-1,ref:g,style:{...i.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function I(e){return"indeterminate"===e}function S(e){return I(e)?"indeterminate":e?"checked":"unchecked"}C.displayName=w},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>n});var s=a(95155),r=a(12115),i=a(40968),d=a(74466),o=a(59434);let l=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.b,{ref:t,className:(0,o.cn)(l(),a),...r})});n.displayName=i.b.displayName},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>p});var s=a(12115);let r=0,i=new Map,d=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?d(a):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],n={toasts:[]};function c(e){n=o(n,e),l.forEach(e=>{e(n)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function p(){let[e,t]=s.useState(n);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},89890:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var s=a(95155),r=a(16976),i=a(30285),d=a(66695),o=a(28044),l=a(76570),n=a(40157);let c=(0,n.A)("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),u=(0,n.A)("PlugZap",[["path",{d:"M6.3 20.3a2.4 2.4 0 0 0 3.4 0L12 18l-6-6-2.3 2.3a2.4 2.4 0 0 0 0 3.4Z",key:"goz73y"}],["path",{d:"m2 22 3-3",key:"19mgm9"}],["path",{d:"M7.5 13.5 10 11",key:"7xgeeb"}],["path",{d:"M10.5 16.5 13 14",key:"10btkg"}],["path",{d:"m18 3-4 4h6l-4 4",key:"16psg9"}]]),p=(0,n.A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),m=(0,n.A)("ShowerHead",[["path",{d:"m4 4 2.5 2.5",key:"uv2vmf"}],["path",{d:"M13.5 6.5a4.95 4.95 0 0 0-7 7",key:"frdkwv"}],["path",{d:"M15 5 5 15",key:"1ag8rq"}],["path",{d:"M14 17v.01",key:"eokfpp"}],["path",{d:"M10 16v.01",key:"14uyyl"}],["path",{d:"M13 13v.01",key:"1v1k97"}],["path",{d:"M16 10v.01",key:"5169yg"}],["path",{d:"M11 20v.01",key:"cj92p8"}],["path",{d:"M17 14v.01",key:"11cswd"}],["path",{d:"M20 11v.01",key:"19e0od"}]]),x=(0,n.A)("WashingMachine",[["path",{d:"M3 6h3",key:"155dbl"}],["path",{d:"M17 6h.01",key:"e2y6kg"}],["rect",{width:"18",height:"20",x:"3",y:"2",rx:"2",key:"od3kk9"}],["circle",{cx:"12",cy:"13",r:"5",key:"nlbqau"}],["path",{d:"M12 18a2.5 2.5 0 0 0 0-5 2.5 2.5 0 0 1 0-5",key:"17lach"}]]),h=(0,n.A)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),f=(0,n.A)("Bath",[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]]);var j=a(50172);let b=(0,n.A)("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);var y=a(53054),N=a(62523),v=a(85057),g=a(59409),k=a(47262),w=a(62177),C=a(90221),I=a(71153),S=a(40283),E=a(67039),A=a(35317),M=a(12115),P=a(87481);let R=I.z.object({clienteId:I.z.string().min(1,"Selecione um cliente."),projetoId:I.z.string().min(1,"Selecione um projeto."),tipo:I.z.string().min(3,"Tipo da etiqueta \xe9 obrigat\xf3rio."),circuito:I.z.string().min(1,"Circuito \xe9 obrigat\xf3rio."),posicao:I.z.string().min(1,"Posi\xe7\xe3o \xe9 obrigat\xf3ria."),isBatchCreation:I.z.boolean().optional(),aptPrefix:I.z.string().optional(),aptStartNumber:I.z.coerce.number().int().positive().optional(),aptEndNumber:I.z.coerce.number().int().positive().optional()}).superRefine((e,t)=>{e.isBatchCreation&&(e.aptPrefix||t.addIssue({code:I.z.ZodIssueCode.custom,message:"Prefixo \xe9 obrigat\xf3rio para cria\xe7\xe3o em lote.",path:["aptPrefix"]}),(void 0===e.aptStartNumber||null===e.aptStartNumber)&&t.addIssue({code:I.z.ZodIssueCode.custom,message:"N\xfamero inicial \xe9 obrigat\xf3rio para cria\xe7\xe3o em lote.",path:["aptStartNumber"]}),(void 0===e.aptEndNumber||null===e.aptEndNumber)&&t.addIssue({code:I.z.ZodIssueCode.custom,message:"N\xfamero final \xe9 obrigat\xf3rio para cria\xe7\xe3o em lote.",path:["aptEndNumber"]}),void 0!==e.aptStartNumber&&void 0!==e.aptEndNumber&&e.aptEndNumber<e.aptStartNumber&&t.addIssue({code:I.z.ZodIssueCode.custom,message:"N\xfamero final deve ser maior ou igual ao inicial.",path:["aptEndNumber"]}),void 0!==e.aptStartNumber&&void 0!==e.aptEndNumber&&e.aptEndNumber-e.aptStartNumber+1>50&&t.addIssue({code:I.z.ZodIssueCode.custom,message:"M\xe1ximo de 50 etiquetas por lote.",path:["aptEndNumber"]}))});function q(){let{user:e}=(0,S.A)(),{toast:t}=(0,P.dj)(),[a,n]=(0,M.useState)([]),[I,q]=(0,M.useState)([]),[D,T]=(0,M.useState)([]),[z,B]=(0,M.useState)(!1),[_,O]=(0,M.useState)(!0),[J,L]=(0,M.useState)(null),[Z,V]=(0,M.useState)(!1),{control:F,handleSubmit:G,reset:U,watch:H,setValue:X,formState:{errors:Q}}=(0,w.mN)({resolver:(0,C.u)(R),defaultValues:{clienteId:"",projetoId:"",tipo:"",circuito:"",posicao:"",isBatchCreation:!1,aptPrefix:"Apto ",aptStartNumber:void 0,aptEndNumber:void 0}}),W=H("clienteId"),$=H("projetoId"),K=H("tipo"),Y=H("circuito"),ee=H("isBatchCreation"),et=(0,M.useCallback)(async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$;if(!t||!e){L(null);return}V(!0);try{let a=(0,A.P)((0,A.rJ)(E.db,"etiquetas"),(0,A._M)("createdBy","==",e.uid),(0,A._M)("projetoId","==",t)),s=(await (0,A.GG)(a)).docs.map(e=>e.data()),r=0;s.forEach(e=>{var t;let a=null===(t=e.circuito)||void 0===t?void 0:t.match(/^C(\d+)$/i);if(a&&a[1]){let e=parseInt(a[1],10);e>r&&(r=e)}}),L("C".concat(r+1))}catch(e){console.error("Error fetching labels for suggestion:",e),L(null)}finally{V(!1)}},[e,$]),ea=(0,M.useCallback)(async()=>{if(e){O(!0);try{let t=(0,A.P)((0,A.rJ)(E.db,"clientes"),(0,A._M)("owner","==",e.uid)),a=(await (0,A.GG)(t)).docs.map(e=>({id:e.id,...e.data()}));n(a);let s=(0,A.P)((0,A.rJ)(E.db,"projetos"),(0,A._M)("owner","==",e.uid)),r=(await (0,A.GG)(s)).docs.map(e=>({id:e.id,...e.data()}));q(r)}catch(e){t({title:"Erro ao buscar dados",description:"N\xe3o foi poss\xedvel carregar clientes e projetos.",variant:"destructive"})}finally{O(!1)}}},[e,t]);(0,M.useEffect)(()=>{ea()},[ea]),(0,M.useEffect)(()=>{W?T(I.filter(e=>e.clienteId===W)):T([]);let e=H("projetoId");e&&!I.find(t=>t.id===e&&t.clienteId===W)&&X("projetoId","",{shouldValidate:!0})},[W,I,H,X]),(0,M.useEffect)(()=>{$?et($):L(null)},[$,et]);let es=async a=>{if(e){B(!0);try{if(a.isBatchCreation&&a.aptStartNumber&&a.aptEndNumber&&a.aptPrefix){let s=(0,A.wP)(E.db),r=0;for(let t=a.aptStartNumber;t<=a.aptEndNumber;t++){let i={createdBy:e.uid,clienteId:a.clienteId,projetoId:a.projetoId,tipo:a.tipo,circuito:a.circuito,posicao:"".concat(a.posicao," - ").concat(a.aptPrefix).concat(t)},d=doc((0,A.rJ)(E.db,"etiquetas"));s.set(d,i),r++}await s.commit(),t({title:"Etiquetas criadas em lote!",description:"".concat(r," etiquetas foram salvas com sucesso.")})}else{let s={createdBy:e.uid,clienteId:a.clienteId,projetoId:a.projetoId,tipo:a.tipo,circuito:a.circuito,posicao:a.posicao};await (0,A.gS)((0,A.rJ)(E.db,"etiquetas"),s),t({title:"Etiqueta criada!",description:"A nova etiqueta foi salva com sucesso."})}U({clienteId:a.clienteId,projetoId:a.projetoId,tipo:"",circuito:"",posicao:"",isBatchCreation:!1,aptPrefix:"Apto ",aptStartNumber:void 0,aptEndNumber:void 0}),et(a.projetoId)}catch(e){console.error("Error creating label(s):",e),t({title:"Erro ao criar etiqueta(s)",description:"N\xe3o foi poss\xedvel salvar a(s) etiqueta(s).",variant:"destructive"})}finally{B(!1)}}},er=Y?(Y.trim().split(/[\s-/]/)[0]||"CX").toUpperCase():"CX",ei=K||"TIPO ETIQUETA",ed="DISJUNTOR ".concat((e=>{let t=e.toLowerCase();return t.includes("idr")||t.includes("dps")?"PROTE\xc7\xc3O":t.includes("chuveiro")?"40A":t.includes("forno")||t.includes("fog\xe3o")||t.includes("cooktop")?"25A":t.includes("ilumina")?"10A":t.includes("lavanderia")?"16A":t.includes("banheiro")&&!t.includes("chuveiro")||t.includes("tomada")||t.includes("computador")?"20A":"XX A"})(K||""));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(r.A,{title:"Cria\xe7\xe3o de Etiquetas T\xe9cnicas",description:"Preencha os dados para gerar uma nova etiqueta ou um lote para m\xfaltiplos locais."}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)(d.Zp,{className:"md:col-span-2",children:[(0,s.jsx)(d.aR,{children:(0,s.jsx)(d.ZB,{children:"Dados da Etiqueta"})}),(0,s.jsx)(d.Wu,{children:_?(0,s.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,s.jsx)(j.A,{className:"h-8 w-8 animate-spin text-primary"})," ",(0,s.jsx)("p",{className:"ml-2",children:"Carregando dados..."})]}):(0,s.jsxs)("form",{onSubmit:G(es),className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"clienteId",children:"Cliente"}),(0,s.jsx)(w.xI,{name:"clienteId",control:F,render:e=>{let{field:t}=e;return(0,s.jsxs)(g.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(g.bq,{id:"clienteId",children:(0,s.jsx)(g.yv,{placeholder:"Selecione um cliente"})}),(0,s.jsx)(g.gC,{children:a.map(e=>(0,s.jsx)(g.eb,{value:e.id,children:e.nome},e.id))})]})}}),Q.clienteId&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.clienteId.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"projetoId",children:"Projeto"}),(0,s.jsx)(w.xI,{name:"projetoId",control:F,render:e=>{let{field:t}=e;return(0,s.jsxs)(g.l6,{onValueChange:t.onChange,value:t.value,disabled:!W||0===D.length,children:[(0,s.jsx)(g.bq,{id:"projetoId",children:(0,s.jsx)(g.yv,{placeholder:W?0===D.length?"Nenhum projeto para este cliente":"Selecione um projeto":"Selecione um cliente primeiro"})}),(0,s.jsx)(g.gC,{children:D.map(e=>(0,s.jsx)(g.eb,{value:e.id,children:e.nome},e.id))})]})}}),Q.projetoId&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.projetoId.message})]}),(0,s.jsxs)("div",{className:"pt-2 pb-1 border-b border-dashed",children:[(0,s.jsx)(v.J,{className:"text-base font-semibold text-foreground",children:"Dados Base da Etiqueta (Modelo)"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Estes dados ser\xe3o usados para todas as etiquetas no lote (se aplic\xe1vel)."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"tipo",children:"Tipo da Etiqueta"}),(0,s.jsx)(w.xI,{name:"tipo",control:F,render:e=>{let{field:t}=e;return(0,s.jsx)(N.p,{id:"tipo",...t,placeholder:"Ex: Ilumina\xe7\xe3o Cozinha, Tomada Sala, IDR Geral"})}}),Q.tipo&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.tipo.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"circuito",children:"Circuito (ID)"}),(0,s.jsx)(w.xI,{name:"circuito",control:F,render:e=>{let{field:t}=e;return(0,s.jsx)(N.p,{id:"circuito",...t,placeholder:"Ex: C1, C2A, IDR, DPS"})}}),Q.circuito&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.circuito.message}),Z&&$&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Buscando sugest\xe3o de ID..."}),!Z&&J&&$&&(0,s.jsx)("div",{className:"mt-1 text-xs",children:(0,s.jsxs)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>X("circuito",J,{shouldValidate:!0}),children:["Usar Sugest\xe3o: ",J]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"posicao",children:"Posi\xe7\xe3o / Localiza\xe7\xe3o Detalhada (Base)"}),(0,s.jsx)(w.xI,{name:"posicao",control:F,render:e=>{let{field:t}=e;return(0,s.jsx)(N.p,{id:"posicao",...t,placeholder:"Ex: QDC Principal, Corredor Quartos"})}}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Para lotes, o prefixo e n\xfamero do local ser\xe3o adicionados aqui."}),Q.posicao&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.posicao.message})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{X("tipo","IDR Geral",{shouldValidate:!0}),X("circuito","IDR",{shouldValidate:!0}),X("posicao","Quadro de Distribui\xe7\xe3o Principal",{shouldValidate:!0})},disabled:!$,children:"Sugerir Etiqueta IDR"}),(0,s.jsx)(i.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{X("tipo","DPS Geral",{shouldValidate:!0}),X("circuito","DPS",{shouldValidate:!0}),X("posicao","Entrada Geral / QDG",{shouldValidate:!0})},disabled:!$,children:"Sugerir Etiqueta DPS"})]}),(0,s.jsxs)("div",{className:"space-y-2 pt-4 border-t border-dashed",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(w.xI,{name:"isBatchCreation",control:F,render:e=>{let{field:t}=e;return(0,s.jsx)(k.S,{id:"isBatchCreation",checked:t.value,onCheckedChange:t.onChange,disabled:!$})}}),(0,s.jsx)(v.J,{htmlFor:"isBatchCreation",className:"font-medium text-foreground",children:"Criar para M\xfaltiplos Apartamentos/Locais?"})]}),Q.isBatchCreation&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.isBatchCreation.message})]}),ee&&$&&(0,s.jsxs)(d.Zp,{className:"p-4 bg-muted/50",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"aptPrefix",children:"Prefixo do Local"}),(0,s.jsx)(w.xI,{name:"aptPrefix",control:F,render:e=>{let{field:t}=e;return(0,s.jsx)(N.p,{id:"aptPrefix",...t})}}),Q.aptPrefix&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.aptPrefix.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"aptStartNumber",children:"N\xfamero Inicial"}),(0,s.jsx)(w.xI,{name:"aptStartNumber",control:F,render:e=>{let{field:t}=e;return(0,s.jsx)(N.p,{id:"aptStartNumber",type:"number",...t})}}),Q.aptStartNumber&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.aptStartNumber.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v.J,{htmlFor:"aptEndNumber",children:"N\xfamero Final"}),(0,s.jsx)(w.xI,{name:"aptEndNumber",control:F,render:e=>{let{field:t}=e;return(0,s.jsx)(N.p,{id:"aptEndNumber",type:"number",...t})}}),Q.aptEndNumber&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:Q.aptEndNumber.message})]})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:'Ex: Prefixo "Apto ", Inicial 101, Final 110 criar\xe1 etiquetas para Apto 101, Apto 102, ..., Apto 110.'})]}),(0,s.jsxs)(i.$,{type:"submit",disabled:z||!$,className:"w-full",children:[z?(0,s.jsx)(j.A,{className:"mr-2 h-4 w-4 animate-spin"}):ee?(0,s.jsx)(b,{className:"mr-2 h-4 w-4"}):(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4"}),ee?"Criar Etiquetas em Lote":"Criar Etiqueta \xdanica"]})]})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(d.Zp,{children:[(0,s.jsx)(d.aR,{children:(0,s.jsx)(d.ZB,{children:"Visualiza\xe7\xe3o da Etiqueta"})}),(0,s.jsxs)(d.Wu,{className:"flex flex-col items-center justify-center p-4 bg-muted rounded-md min-h-[200px]",children:[(0,s.jsxs)("div",{className:"w-[260px] h-[100px] bg-white border-2 border-black rounded-lg flex font-sans shadow-md",children:[(0,s.jsx)("div",{className:"w-1/3 flex items-center justify-center border-r-2 border-black p-1",children:(0,s.jsx)("span",{className:"text-3xl font-bold text-black truncate",title:er,children:er})}),(0,s.jsxs)("div",{className:"w-2/3 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex-1 flex items-center p-2 border-b-2 border-black",children:[(e=>{let t=e.toLowerCase();return t.includes("idr")?(0,s.jsx)(o.A,{className:"h-7 w-7 mr-2 shrink-0 text-yellow-500"}):t.includes("dps")?(0,s.jsx)(l.A,{className:"h-7 w-7 mr-2 shrink-0 text-green-500"}):t.includes("ilumina")?(0,s.jsx)(c,{className:"h-7 w-7 mr-2 shrink-0"}):t.includes("tomada")?(0,s.jsx)(u,{className:"h-7 w-7 mr-2 shrink-0"}):t.includes("computador")||t.includes("pc")?(0,s.jsx)(p,{className:"h-7 w-7 mr-2 shrink-0"}):t.includes("chuveiro")?(0,s.jsx)(m,{className:"h-7 w-7 mr-2 shrink-0"}):t.includes("lavanderia")||t.includes("m\xe1quina de lavar")||t.includes("lava roupa")?(0,s.jsx)(x,{className:"h-7 w-7 mr-2 shrink-0"}):t.includes("forno")||t.includes("fog\xe3o")||t.includes("cooktop")?(0,s.jsx)(h,{className:"h-7 w-7 mr-2 shrink-0 text-muted-foreground"}):t.includes("banheiro")||t.includes("banheira")?(0,s.jsx)(f,{className:"h-7 w-7 mr-2 shrink-0"}):(0,s.jsx)(h,{className:"h-7 w-7 mr-2 shrink-0 text-muted-foreground"})})(K||""),(0,s.jsx)("span",{className:"font-bold text-base text-black uppercase truncate",title:ei,children:ei})]}),(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center p-1",children:(0,s.jsx)("span",{className:"text-xs text-black uppercase",children:ed})})]})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-3 text-center",children:ee?"A visualiza\xe7\xe3o mostra o modelo base para o lote.":"A etiqueta real ser\xe1 gerada com QR Code (funcionalidade futura)."})]})]}),(0,s.jsxs)(d.Zp,{children:[(0,s.jsx)(d.aR,{children:(0,s.jsx)(d.ZB,{children:"Dicas"})}),(0,s.jsxs)(d.Wu,{className:"text-sm text-muted-foreground space-y-2",children:[(0,s.jsx)("p",{children:"• **Selecione Cliente e Projeto** primeiro para habilitar a cria\xe7\xe3o."}),(0,s.jsx)("p",{children:"• **Cria\xe7\xe3o em Lote:** Marque a op\xe7\xe3o para criar etiquetas para uma s\xe9rie de locais (ex: apartamentos 101 a 110). Os dados base (tipo, circuito) ser\xe3o replicados."}),(0,s.jsx)("p",{children:"• **Circuito (ID):** Use a sugest\xe3o autom\xe1tica (C1, C2...) ou digite um ID espec\xedfico (ex: IDR, DPS)."}),(0,s.jsx)("p",{children:"• **Bot\xf5es de Sugest\xe3o (IDR/DPS):** Preenchem os campos com dados padr\xe3o para esses tipos de prote\xe7\xe3o."})]})]})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,668,9023,7289,4641,2356,7328,5886,283,8441,1684,7358],()=>t(45216)),_N_E=e.O()}]);