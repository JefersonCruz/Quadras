(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3492],{16976:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(95155);function r(e){let{title:t,description:a,actions:r}=e;return(0,s.jsxs)("div",{className:"mb-6 md:flex md:items-center md:justify-between",children:[(0,s.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold leading-7 text-foreground sm:truncate sm:text-3xl sm:tracking-tight",children:t}),a&&(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:a})]}),r&&(0,s.jsx)("div",{className:"mt-4 flex md:ml-4 md:mt-0",children:r})]})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>l});var s=a(95155),r=a(12115),o=a(99708),n=a(74466),i=a(59434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:d=!1,...c}=e,m=d?o.DX:"button";return(0,s.jsx)(m,{className:(0,i.cn)(l({variant:r,size:n,className:a})),ref:t,...c})});d.displayName="Button"},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},40283:(e,t,a)=>{"use strict";a.d(t,{A:()=>m,AuthProvider:()=>c});var s=a(95155),r=a(93004),o=a(12115),n=a(67039),i=a(35317),l=a(50172);let d=(0,o.createContext)(void 0),c=e=>{let{children:t}=e,[a,c]=(0,o.useState)(null),[m,u]=(0,o.useState)(null),[p,x]=(0,o.useState)(!1),[h,f]=(0,o.useState)(!1);return((0,o.useEffect)(()=>{let e,t=!1;console.log("[AuthContext] Mount. didUnsubscribe=false. Setting up onAuthStateChanged and timeout.");let a=setTimeout(()=>{t||h||(console.warn("[AuthContext] Auth check TIMEOUT (15s). Forcing authResolved=true."),t||(c(null),u(null),x(!1),f(!0)))},15e3);try{e=(0,r.hg)(n.j2,async e=>{if(console.log("[AuthContext] onAuthStateChanged triggered. firebaseUser UID:",e?e.uid:"null"),t){console.log("[AuthContext] onAuthStateChanged: Component unmounted, exiting.");return}try{if(e){console.log("[AuthContext] firebaseUser exists. UID:",e.uid),t||c(e);try{console.log("[AuthContext] Attempting to get userDocRef for UID:",e.uid);let a=(0,i.H9)(n.db,"usuarios",e.uid);console.log("[AuthContext] userDocRef created. Attempting getDoc.");let s=await (0,i.x7)(a);if(console.log("[AuthContext] getDoc completed. userDocSnap.exists():",s.exists()),s.exists()){let e=s.data();t||(u(e),x("admin"===e.role)),console.log("[AuthContext] User data from Firestore:",e)}else console.warn("[AuthContext] User document ".concat(e.uid," not found in Firestore. Resetting userData/isAdmin.")),t||(u(null),x(!1))}catch(e){console.error("[AuthContext] Error fetching user data from Firestore:",e),t||(u(null),x(!1))}}else console.log("[AuthContext] No firebaseUser. Resetting user, userData, isAdmin."),t||(c(null),u(null),x(!1))}catch(e){console.error("[AuthContext] Inner error in onAuthStateChanged async callback:",e),t||(c(null),u(null),x(!1))}finally{t||(console.log("[AuthContext] onAuthStateChanged finally block. Setting authResolved=true."),f(!0),clearTimeout(a))}})}catch(e){console.error("[AuthContext] CRITICAL: Error setting up onAuthStateChanged listener:",e),t||(c(null),u(null),x(!1),console.log("[AuthContext] Setting authResolved=true in onAuthStateChanged SETUP CATCH block due to critical error."),f(!0),clearTimeout(a))}return()=>{console.log("[AuthContext] Cleanup. Setting didUnsubscribe=true."),t=!0,e&&(console.log("[AuthContext] Unsubscribing from onAuthStateChanged."),e()),clearTimeout(a),console.log("[AuthContext] Cleared loadingTimeout in cleanup.")}},[]),h)?(0,s.jsx)(d.Provider,{value:{user:a,userData:m,isAdmin:p,loading:!h,db:n.db},children:t}):(0,s.jsxs)("div",{className:"flex h-screen flex-col items-center justify-center gap-2 bg-background text-muted-foreground",children:[(0,s.jsx)(l.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,s.jsx)("p",{className:"text-sm mt-4",children:"Carregando autentica\xe7\xe3o..."})]})},m=()=>{let e=(0,o.useContext)(d);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},49339:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]])},50286:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},59409:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>f,gC:()=>h,l6:()=>c,yv:()=>m});var s=a(95155),r=a(12115),o=a(31992),n=a(79556),i=a(77381),l=a(10518),d=a(59434);let c=o.bL;o.YJ;let m=o.WT,u=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(o.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,s.jsx)(o.In,{asChild:!0,children:(0,s.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=o.l9.displayName;let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=o.PP.displayName;let x=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=o.wn.displayName;let h=r.forwardRef((e,t)=>{let{className:a,children:r,position:n="popper",...i}=e;return(0,s.jsx)(o.ZL,{children:(0,s.jsxs)(o.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...i,children:[(0,s.jsx)(p,{}),(0,s.jsx)(o.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(x,{})]})})});h.displayName=o.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=o.JU.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(o.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(o.VF,{children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})}),(0,s.jsx)(o.p4,{children:r})]})});f.displayName=o.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=o.wv.displayName},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>o});var s=a(52596),r=a(39688);function o(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},59771:(e,t,a)=>{Promise.resolve().then(a.bind(a,75347))},62523:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(95155),r=a(12115),o=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});n.displayName="Input"},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>i,wL:()=>m});var s=a(95155),r=a(12115),o=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,o.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},67039:(e,t,a)=>{"use strict";let s;a.d(t,{IG:()=>c,db:()=>d,hJ:()=>m,j2:()=>l});var r=a(23915),o=a(93004),n=a(35317),i=a(90858);s=(0,r.Dk)().length?(0,r.Sx)():(0,r.Wp)({apiKey:"AIzaSyB6l66mg1YBrpekOLGtSzdsIIlyXsM0ziU",authDomain:"anode-lite.firebaseapp.com",projectId:"anode-lite",storageBucket:"anode-lite.firebasestorage.app",messagingSenderId:"468146694907",appId:"1:468146694907:web:aa60f4e32503ef70401e5e"});let l=(0,o.xI)(s),d=(0,n.aU)(s),c=(0,i.c7)(s),m=new o.HF},75347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>D});var s=a(95155),r=a(12115),o=a(35695),n=a(62177),i=a(90221),l=a(71153),d=a(16976),c=a(30285),m=a(66695),u=a(62523),p=a(85057),x=a(88539),h=a(59409),f=a(40283),g=a(67039),j=a(35317),v=a(87481),N=a(86950);let b=(0,a(40157).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var A=a(50286),C=a(49339),y=a(50172);let E=l.z.object({tipo:l.z.enum(["padr\xe3o","emergencial"],{required_error:"Tipo de contrato \xe9 obrigat\xf3rio."}),clienteNome:l.z.string().min(3,"Nome do cliente \xe9 obrigat\xf3rio."),clienteEmail:l.z.string().email("Email do cliente inv\xe1lido."),clienteCpfCnpj:l.z.string().optional(),testemunha1Nome:l.z.string().min(3,"Nome da Testemunha 1 \xe9 obrigat\xf3rio.").optional().or(l.z.literal("")),testemunha1Email:l.z.string().email("Email da Testemunha 1 inv\xe1lido.").optional().or(l.z.literal("")),testemunha2Nome:l.z.string().min(3,"Nome da Testemunha 2 \xe9 obrigat\xf3rio.").optional().or(l.z.literal("")),testemunha2Email:l.z.string().email("Email da Testemunha 2 inv\xe1lido.").optional().or(l.z.literal("")),objetoDoContrato:l.z.string().min(10,"Objeto do contrato \xe9 obrigat\xf3rio."),prazoDeExecucao:l.z.string().min(3,"Prazo de execu\xe7\xe3o \xe9 obrigat\xf3rio."),condicoesDePagamento:l.z.string().min(10,"Condi\xe7\xf5es de pagamento s\xe3o obrigat\xf3rias."),fornecimentoDeMateriais:l.z.string().min(5,"Informa\xe7\xe3o sobre fornecimento de materiais \xe9 obrigat\xf3ria."),multasPenalidades:l.z.string().min(5,"Informa\xe7\xe3o sobre multas/penalidades/responsabilidades/garantia \xe9 obrigat\xf3ria."),cancelamento:l.z.string().min(5,"Informa\xe7\xe3o sobre cancelamento \xe9 obrigat\xf3ria."),foro:l.z.string().optional(),empresaNomeDisplay:l.z.string().optional(),empresaCnpjDisplay:l.z.string().optional(),empresaEnderecoDisplay:l.z.string().optional(),empresaResponsavel:l.z.string().min(3,"Respons\xe1vel da empresa \xe9 obrigat\xf3rio.").optional()});function D(){let{user:e,userData:t}=(0,f.A)(),a=(0,o.useRouter)(),{toast:l}=(0,v.dj)(),[D,T]=(0,r.useState)(!1),[S,R]=(0,r.useState)(null),{control:O,handleSubmit:w,reset:I,setValue:P,formState:{errors:U}}=(0,n.mN)({resolver:(0,i.u)(E),defaultValues:{tipo:"padr\xe3o",clienteNome:"",clienteEmail:"",clienteCpfCnpj:"",testemunha1Nome:"",testemunha1Email:"",testemunha2Nome:"",testemunha2Email:"",objetoDoContrato:"CL\xc1USULA 1 – OBJETO\nO presente contrato tem como objeto a presta\xe7\xe3o de servi\xe7os t\xe9cnicos de [DESCREVER SERVI\xc7O: instala\xe7\xe3o el\xe9trica, reparos, manuten\xe7\xe3o, projeto, etc.], a serem realizados no endere\xe7o: [LOCAL DE EXECU\xc7\xc3O].",prazoDeExecucao:"CL\xc1USULA 2 – PRAZO\nA execu\xe7\xe3o dos servi\xe7os ter\xe1 in\xedcio em [DATA INICIAL] e prazo estimado de [X DIAS/SEMANAS], podendo ser prorrogado por acordo entre as partes.",condicoesDePagamento:"CL\xc1USULA 3 – VALOR E CONDI\xc7\xd5ES DE PAGAMENTO\nO valor total dos servi\xe7os \xe9 de R$ [XXXX,XX] (por extenso), a ser pago da seguinte forma:\n[ ] \xc0 vista\n[ ] Parcelado em [X] vezes de R$ [XX,XX]\n[ ] Entrada de R$ [XX,XX] e o restante ao t\xe9rmino\nO pagamento ser\xe1 efetuado mediante [PIX | dinheiro | transfer\xeancia banc\xe1ria].",fornecimentoDeMateriais:"CL\xc1USULA 4 – RESPONSABILIDADES DO CONTRATADO (Materiais)\n- Utilizar materiais de qualidade (caso o CONTRATADO forne\xe7a).\n- Os materiais necess\xe1rios para a execu\xe7\xe3o dos servi\xe7os ser\xe3o fornecidos pelo [CONTRATADO/CONTRATANTE], e seus custos ser\xe3o [detalhados em anexo/inclu\xeddos no valor total], mediante apresenta\xe7\xe3o de notas fiscais, ou [outra condi\xe7\xe3o].",multasPenalidades:"CL\xc1USULA 4 – RESPONSABILIDADES DO CONTRATADO\nO CONTRATADO se obriga a:\n- Executar os servi\xe7os com zelo, seguran\xe7a e qualidade t\xe9cnica.\n- Seguir as normas t\xe9cnicas (ex: NBR 5410 para instala\xe7\xf5es el\xe9tricas).\n- Assumir responsabilidades por danos causados por imper\xedcia ou neglig\xeancia.\n- Emitir recibo ou nota fiscal (se for empresa).\n\nCL\xc1USULA 5 – RESPONSABILIDADES DO CONTRATANTE\nO CONTRATANTE se compromete a:\n- Disponibilizar acesso ao local dos servi\xe7os.\n- Fornecer energia, \xe1gua e condi\xe7\xf5es adequadas de trabalho (se necess\xe1rio).\n- Efetuar os pagamentos nas condi\xe7\xf5es acordadas.\n\nCL\xc1USULA 6 – GARANTIA (SE APLIC\xc1VEL)\nO CONTRATADO garante os servi\xe7os prestados por [90 dias] a contar da entrega/conclus\xe3o, conforme art. 26 do C\xf3digo de Defesa do Consumidor.\nCaso haja falha comprovada de execu\xe7\xe3o, o servi\xe7o ser\xe1 refeito sem custos adicionais.",cancelamento:"CL\xc1USULA 7 – RESCIS\xc3O\nO presente contrato poder\xe1 ser rescindido por qualquer das partes, mediante notifica\xe7\xe3o pr\xe9via de [5] dias \xfateis.\nSe houver servi\xe7os j\xe1 executados, o CONTRATADO ter\xe1 direito ao valor proporcional.",foro:"CL\xc1USULA 8 – FORO\nPara dirimir quaisquer d\xfavidas oriundas deste contrato, as partes elegem o foro da comarca de [CIDADE/UF].",empresaNomeDisplay:"",empresaCnpjDisplay:"",empresaEnderecoDisplay:"",empresaResponsavel:(null==t?void 0:t.nome)||""}});(0,r.useEffect)(()=>{(async()=>{if(e){let a=(0,j.H9)(g.db,"empresas",e.uid),s=await (0,j.x7)(a);if(s.exists()){let e=s.data();R(e),P("empresaNomeDisplay",e.nome||"N\xe3o configurado"),P("empresaCnpjDisplay",e.cnpj||"N\xe3o configurado"),P("empresaEnderecoDisplay",e.endereco||"N\xe3o configurado")}else l({title:"Dados da Empresa N\xe3o Configurados",description:"Configure o perfil da sua empresa para preenchimento autom\xe1tico dos dados do prestador.",variant:"default",duration:5e3});(null==t?void 0:t.nome)&&P("empresaResponsavel",t.nome,{shouldValidate:!0})}})()},[e,t,P,l]);let z=async s=>{if(!e){l({title:"Usu\xe1rio n\xe3o autenticado",variant:"destructive"});return}T(!0);let r=[];s.testemunha1Nome&&s.testemunha1Email&&""!==s.testemunha1Nome.trim()&&""!==s.testemunha1Email.trim()&&r.push({nome:s.testemunha1Nome,email:s.testemunha1Email}),s.testemunha2Nome&&s.testemunha2Email&&""!==s.testemunha2Nome.trim()&&""!==s.testemunha2Email.trim()&&r.push({nome:s.testemunha2Nome,email:s.testemunha2Email});let o={nome:s.clienteNome,email:s.clienteEmail};s.clienteCpfCnpj&&""!==s.clienteCpfCnpj.trim()&&(o.cpfCnpj=s.clienteCpfCnpj.trim());let n={objetoDoContrato:s.objetoDoContrato,prazoDeExecucao:s.prazoDeExecucao,condicoesDePagamento:s.condicoesDePagamento,fornecimentoDeMateriais:s.fornecimentoDeMateriais,multasPenalidades:s.multasPenalidades,cancelamento:s.cancelamento};s.foro&&""!==s.foro.trim()&&(n.foro=s.foro.trim());let i={nome:(null==S?void 0:S.nome)||s.empresaNomeDisplay||"Empresa n\xe3o informada"},d=(null==S?void 0:S.cnpj)||s.empresaCnpjDisplay;d&&""!==d.trim()&&"N\xe3o configurado"!==d&&(i.cnpj=d.trim());let c=(null==S?void 0:S.endereco)||s.empresaEnderecoDisplay;c&&""!==c.trim()&&"N\xe3o configurado"!==c&&(i.endereco=c.trim());let m=s.empresaResponsavel||(null==t?void 0:t.nome);m&&""!==m.trim()&&(i.responsavelTecnico=m.trim());let u={createdBy:e.uid,tipo:s.tipo,cliente:o,blocosEditaveis:n,status:"rascunho",assinaturas:{},dataCriacao:j.Dc.now(),dataUltimaModificacao:j.Dc.now(),empresaPrestador:i};r.length>0&&(u.testemunhas=r),"emergencial"===s.tipo&&(u.taxaDeslocamento=100,u.termosEmergencial="Para atendimentos emergenciais, aplica-se uma taxa de deslocamento de R$100,00. O aceite destes termos implica na concord\xe2ncia do pagamento da referida taxa, mesmo que o servi\xe7o n\xe3o seja executado por decis\xe3o do cliente ap\xf3s a chegada do t\xe9cnico, ou caso o t\xe9cnico j\xe1 esteja a caminho e o chamado seja cancelado. O valor do servi\xe7o ser\xe1 or\xe7ado no local antes da execu\xe7\xe3o.");try{await (0,j.gS)((0,j.rJ)(g.db,"contratos"),u),l({title:"Contrato criado!",description:"O novo contrato foi salvo como rascunho."}),a.push("/dashboard/contracts")}catch(e){console.error("Erro ao criar contrato:",e),l({title:"Erro ao criar contrato",description:"N\xe3o foi poss\xedvel salvar o contrato.",variant:"destructive"})}finally{T(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.A,{title:"Novo Contrato Digital",description:"Pelo presente instrumento particular, preencha os dados para criar um novo contrato de presta\xe7\xe3o de servi\xe7o."}),(0,s.jsx)("form",{onSubmit:w(z),children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)(m.Zp,{children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsxs)(m.ZB,{className:"flex items-center",children:[(0,s.jsx)(N.A,{className:"mr-2 h-5 w-5 text-primary"})," Dados da Sua Empresa (CONTRATADO)"]}),(0,s.jsx)(m.BT,{children:"Estes dados s\xe3o do seu perfil de empresa ou preenchidos com base no seu usu\xe1rio. Ser\xe3o inclu\xeddos no contrato."})]}),(0,s.jsxs)(m.Wu,{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{children:"Nome da Empresa / Profissional"}),(0,s.jsx)(n.xI,{name:"empresaNomeDisplay",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{...t,disabled:!0})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{children:"CNPJ/CPF"}),(0,s.jsx)(n.xI,{name:"empresaCnpjDisplay",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{...t,disabled:!0})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{children:"Endere\xe7o Completo"}),(0,s.jsx)(n.xI,{name:"empresaEnderecoDisplay",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{...t,disabled:!0})}})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"empresaResponsavel",children:"Representado por / Respons\xe1vel T\xe9cnico"}),(0,s.jsx)(n.xI,{name:"empresaResponsavel",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"empresaResponsavel",...t,placeholder:"Seu nome como respons\xe1vel"})}}),U.empresaResponsavel&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.empresaResponsavel.message})]})]})]}),(0,s.jsxs)(m.Zp,{children:[(0,s.jsx)(m.aR,{children:(0,s.jsxs)(m.ZB,{className:"flex items-center",children:[(0,s.jsx)(b,{className:"mr-2 h-5 w-5 text-primary"})," Dados do Cliente (CONTRATANTE)"]})}),(0,s.jsxs)(m.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"clienteNome",children:"Nome Completo do Cliente"}),(0,s.jsx)(n.xI,{name:"clienteNome",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"clienteNome",...t,placeholder:"[NOME DO CONTRATANTE]"})}}),U.clienteNome&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.clienteNome.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"clienteEmail",children:"Email do Cliente"}),(0,s.jsx)(n.xI,{name:"clienteEmail",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"clienteEmail",type:"email",...t})}}),U.clienteEmail&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.clienteEmail.message})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)(p.J,{htmlFor:"clienteCpfCnpj",children:"CPF/CNPJ do Cliente"}),(0,s.jsx)(n.xI,{name:"clienteCpfCnpj",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"clienteCpfCnpj",...t,placeholder:"[CPF/CNPJ DO CONTRATANTE]"})}}),U.clienteCpfCnpj&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.clienteCpfCnpj.message})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)(p.J,{children:"Endere\xe7o do Cliente"}),(0,s.jsx)(u.p,{disabled:!0,placeholder:"Ser\xe1 obtido do cadastro do cliente"})]})]})]}),(0,s.jsxs)(m.Zp,{children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsxs)(m.ZB,{className:"flex items-center",children:[(0,s.jsx)(A.A,{className:"mr-2 h-5 w-5 text-primary"})," Dados das Testemunhas (Opcional)"]}),(0,s.jsx)(m.BT,{children:"Informe os dados de at\xe9 duas testemunhas para o contrato."})]}),(0,s.jsxs)(m.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-b pb-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"testemunha1Nome",children:"Nome da Testemunha 1"}),(0,s.jsx)(n.xI,{name:"testemunha1Nome",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"testemunha1Nome",...t})}}),U.testemunha1Nome&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.testemunha1Nome.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"testemunha1Email",children:"Email da Testemunha 1"}),(0,s.jsx)(n.xI,{name:"testemunha1Email",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"testemunha1Email",type:"email",...t})}}),U.testemunha1Email&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.testemunha1Email.message})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"testemunha2Nome",children:"Nome da Testemunha 2"}),(0,s.jsx)(n.xI,{name:"testemunha2Nome",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"testemunha2Nome",...t})}}),U.testemunha2Nome&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.testemunha2Nome.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"testemunha2Email",children:"Email da Testemunha 2"}),(0,s.jsx)(n.xI,{name:"testemunha2Email",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"testemunha2Email",type:"email",...t})}}),U.testemunha2Email&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.testemunha2Email.message})]})]})]})]}),(0,s.jsxs)(m.Zp,{children:[(0,s.jsxs)(m.aR,{children:[(0,s.jsxs)(m.ZB,{className:"flex items-center",children:[(0,s.jsx)(C.A,{className:"mr-2 h-5 w-5 text-primary"})," Cl\xe1usulas Edit\xe1veis do Contrato"]}),(0,s.jsx)(m.BT,{children:"Ajuste as cl\xe1usulas conforme necess\xe1rio. Os textos padr\xe3o servem como base."})]}),(0,s.jsxs)(m.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"objetoDoContrato",children:"CL\xc1USULA 1 – OBJETO"}),(0,s.jsx)(n.xI,{name:"objetoDoContrato",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(x.T,{id:"objetoDoContrato",...t,rows:4})}}),U.objetoDoContrato&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.objetoDoContrato.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"prazoDeExecucao",children:"CL\xc1USULA 2 – PRAZO"}),(0,s.jsx)(n.xI,{name:"prazoDeExecucao",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(x.T,{id:"prazoDeExecucao",...t,rows:3})}}),U.prazoDeExecucao&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.prazoDeExecucao.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"condicoesDePagamento",children:"CL\xc1USULA 3 – VALOR E CONDI\xc7\xd5ES DE PAGAMENTO"}),(0,s.jsx)(n.xI,{name:"condicoesDePagamento",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(x.T,{id:"condicoesDePagamento",...t,rows:5})}}),U.condicoesDePagamento&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.condicoesDePagamento.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"fornecimentoDeMateriais",children:"CL\xc1USULA 4 (EXTRATO) – FORNECIMENTO DE MATERIAIS"}),(0,s.jsx)(n.xI,{name:"fornecimentoDeMateriais",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(x.T,{id:"fornecimentoDeMateriais",...t,rows:4})}}),U.fornecimentoDeMateriais&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.fornecimentoDeMateriais.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"multasPenalidades",children:"CL\xc1USULAS 4, 5, 6 – RESPONSABILIDADES E GARANTIA"}),(0,s.jsx)(n.xI,{name:"multasPenalidades",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(x.T,{id:"multasPenalidades",...t,rows:8})}}),U.multasPenalidades&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.multasPenalidades.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"cancelamento",children:"CL\xc1USULA 7 – RESCIS\xc3O"}),(0,s.jsx)(n.xI,{name:"cancelamento",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(x.T,{id:"cancelamento",...t,rows:4})}}),U.cancelamento&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.cancelamento.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"foro",children:"CL\xc1USULA 8 – FORO"}),(0,s.jsx)(n.xI,{name:"foro",control:O,render:e=>{let{field:t}=e;return(0,s.jsx)(u.p,{id:"foro",...t,placeholder:"Ex: Comarca de [CIDADE/UF]"})}}),U.foro&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.foro.message})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"E por estarem assim justos e contratados, assinam o presente em duas vias de igual teor. [Local de assinatura], [Data da assinatura]."})]})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,s.jsxs)(m.Zp,{children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{children:"Tipo e A\xe7\xf5es"})}),(0,s.jsx)(m.Wu,{className:"space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(p.J,{htmlFor:"tipo",children:"Tipo de Contrato"}),(0,s.jsx)(n.xI,{name:"tipo",control:O,render:e=>{let{field:t}=e;return(0,s.jsxs)(h.l6,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(h.bq,{id:"tipo",children:(0,s.jsx)(h.yv,{placeholder:"Selecione o tipo"})}),(0,s.jsxs)(h.gC,{children:[(0,s.jsx)(h.eb,{value:"padr\xe3o",children:"Padr\xe3o"}),(0,s.jsx)(h.eb,{value:"emergencial",children:"Emergencial"})]})]})}}),U.tipo&&(0,s.jsx)("p",{className:"text-sm text-destructive mt-1",children:U.tipo.message})]})}),(0,s.jsx)(m.wL,{children:(0,s.jsx)(c.$,{type:"submit",className:"w-full",disabled:D,children:D?(0,s.jsx)(y.A,{className:"mr-2 h-4 w-4 animate-spin"}):"Salvar Rascunho do Contrato"})})]}),(0,s.jsxs)(m.Zp,{children:[(0,s.jsx)(m.aR,{children:(0,s.jsx)(m.ZB,{children:"Pr\xf3ximos Passos"})}),(0,s.jsxs)(m.Wu,{className:"text-sm text-muted-foreground space-y-2",children:[(0,s.jsx)("p",{children:"1. Salve o rascunho deste contrato."}),(0,s.jsx)("p",{children:"2. Visualize o contrato gerado na lista de contratos."}),(0,s.jsx)("p",{children:"3. Compartilhe o link para assinatura do cliente e testemunhas."}),(0,s.jsx)("p",{children:"4. Acompanhe o status das assinaturas."})]})]})]})]})})]})}},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>d});var s=a(95155),r=a(12115),o=a(40968),n=a(74466),i=a(59434);let l=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(o.b,{ref:t,className:(0,i.cn)(l(),a),...r})});d.displayName=o.b.displayName},86950:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(12115);let r=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(95155),r=a(12115),o=a(59434);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,o.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});n.displayName="Textarea"}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,668,9023,167,2356,9397,7589,3470,8200,8441,1684,7358],()=>t(59771)),_N_E=e.O()}]);